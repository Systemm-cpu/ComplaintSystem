(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[552],{728:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/track",function(){return r(8652)}])},3139:function(e,t,r){"use strict";r.d(t,{S:function(){return i}});let n="https://complaint.ogra.org.pk";if(!n){let{protocol:e,hostname:t}=window.location;n="".concat(e,"//").concat(t,":5000")}n||(n="http://localhost:5000");let i="https://complaint.ogra.org.pk"},8652:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return o}});var n=r(5893),i=r(7294),s=r(7066),a=r(3139);function o(){var e;let[t,r]=(0,i.useState)(""),[o,l]=(0,i.useState)(null),[d,c]=(0,i.useState)(""),m=async e=>{e.preventDefault(),c(""),l(null);try{let e=await s.Z.get(a.S+"/api/complaints/track/"+t.trim());l(e.data),e.data||c("No complaint found for this Tracking ID")}catch(e){c("Failed to fetch status")}};function u(e){let t=(e||"").trim();return/^\[PUBLIC\]/i.test(t)?{visibility:"PUBLIC",text:t.replace(/^\[PUBLIC\]\s*/i,"")}:/^\[INTERNAL\]/i.test(t)?{visibility:"INTERNAL",text:t.replace(/^\[INTERNAL\]\s*/i,"")}:{visibility:"DEFAULT",text:t}}let g=o&&o.logs?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.find(e=>{let t=(e.comments||"").trim();if(!t||/^Status changed to/i.test(t)||/^Forwarded to/i.test(t))return!1;let{visibility:r,text:n}=u(t);return"INTERNAL"!==r&&!!n})||null}(o.logs):null;return(0,n.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"radial-gradient(circle at top, #0f172a, #020617)",padding:"1rem"},children:(0,n.jsxs)("div",{className:"card",style:{width:"100%",maxWidth:520},children:[(0,n.jsx)("h1",{className:"text-ogra-green",style:{fontSize:"1.3rem",marginBottom:"0.3rem"},children:"Track Complaint"}),(0,n.jsxs)("form",{onSubmit:m,style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:[(0,n.jsx)("input",{className:"input",placeholder:"Enter Tracking ID",value:t,onChange:e=>r(e.target.value)}),(0,n.jsx)("button",{className:"btn btn-primary",children:"Check"})]}),d&&(0,n.jsx)("div",{style:{color:"#fecaca",fontSize:"0.8rem",marginBottom:"0.25rem"},children:d}),o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{style:{padding:"0.75rem",borderRadius:"0.75rem",background:"rgba(59,130,246,0.12)",border:"1px solid rgba(59,130,246,0.5)",fontSize:"0.85rem",marginBottom:"0.75rem"},children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Tracking:"})," ",o.trackingId]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Status:"})," ",null===(e=o.status)||void 0===e?void 0:e.name]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Created:"})," ",o.createdAt?new Date(o.createdAt).toLocaleString():"-"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Last Update:"})," ",o.updatedAt?new Date(o.updatedAt).toLocaleString():"-"]})]}),o.disposal&&(0,n.jsxs)("div",{style:{marginBottom:"0.75rem",padding:"0.75rem",borderRadius:"0.75rem",background:"rgba(248,113,113,0.08)",border:"1px solid rgba(220,38,38,0.5)",fontSize:"0.85rem"},children:[(0,n.jsx)("h2",{style:{fontSize:"0.95rem",color:"#fca5a5",marginBottom:"0.4rem"},children:"Final OGRA Decision / Disposed Of"}),o.disposal.createdAt&&(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Date:"})," ",new Date(o.disposal.createdAt).toLocaleString()]}),o.disposal.note&&(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Note:"})," ",o.disposal.note]}),o.disposal.filePath&&(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Decision File: "}),(0,n.jsx)("a",{href:a.S+o.disposal.filePath,target:"_blank",rel:"noreferrer",style:{color:"#0C512F"},children:"Download Decision"})]})]}),g&&(0,n.jsxs)("div",{style:{paddingTop:"0.5rem",borderTop:"1px solid #1f2937",marginTop:"0.5rem"},children:[(0,n.jsx)("h2",{style:{fontSize:"0.95rem",color:"#bfdbfe",marginBottom:"0.4rem"},children:"Latest Remark"}),(0,n.jsxs)("div",{style:{borderRadius:8,padding:"0.6rem 0.7rem",background:"rgba(15,23,42,0.7)",border:"1px solid rgba(148,163,184,0.5)",fontSize:"0.8rem",color:"#e5e7eb"},children:[(0,n.jsxs)("div",{style:{fontSize:"0.7rem",color:"#9ca3af",marginBottom:"0.25rem"},children:[g.createdAt?new Date(g.createdAt).toLocaleString():"","  â€”  ",(0,n.jsx)("strong",{style:{color:"#bfdbfe"},children:g.user?"ADMIN"===g.user.role?"Admin":"DO"===g.user.role?g.user.username||"DO":g.user.username||"System":"System"})]}),(0,n.jsx)("div",{children:(e=>{if(!e)return"";let{text:t}=u(e.comments||"");return t})(g)})]})]})]})]})})}}},function(e){e.O(0,[66,888,774,179],function(){return e(e.s=728)}),_N_E=e.O()}]);