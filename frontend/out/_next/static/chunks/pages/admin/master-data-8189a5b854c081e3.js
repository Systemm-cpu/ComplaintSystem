(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[304],{8918:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/master-data",function(){return n(1549)}])},9046:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(5893),i=n(1664),o=n.n(i),a=n(1013),s=n(7294);function l(e){let{children:t}=e,[n,i]=(0,s.useState)(null),[o,l]=(0,s.useState)(null),[c,m]=(0,s.useState)(!1);(0,s.useEffect)(()=>{i((0,a.cY)()),l((0,a.Ms)())},[]);let p="ADMIN"===n,u="SR_REGISTRAR"===n,h="DO"===n;return(0,r.jsxs)("div",{style:{minHeight:"100vh",display:"flex",background:"#f6f6f6",fontFamily:"sans-serif"},children:[(0,r.jsxs)("aside",{className:"print-hidden",onMouseEnter:()=>m(!1),onMouseLeave:()=>m(!0),style:{width:c?"70px":"240px",background:"#0C512F",color:"white",transition:"width 0.25s ease",overflow:"hidden",boxShadow:"2px 0 5px rgba(0,0,0,0.1)"},children:[(0,r.jsxs)("div",{style:{padding:"1rem",borderBottom:"1px solid rgba(255,255,255,0.15)",display:"flex",alignItems:"center",gap:"0.75rem"},children:[(0,r.jsx)("img",{src:"/ogra-logo.png",alt:"OGRA Logo",style:{width:"36px",height:"36px",objectFit:"contain"}}),!c&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{style:{fontWeight:700,fontSize:"0.95rem",lineHeight:"1.2"},children:"OGRA Dashboard"}),(0,r.jsx)("div",{style:{fontSize:"0.7rem",opacity:.8},children:"ADMIN"===n?"REGISTRAR":"".concat(o||"DO User"," (").concat(n||"No Role",")")})]})]}),(0,r.jsxs)("nav",{style:{padding:"0.75rem 0.5rem"},children:[(0,r.jsx)(d,{href:"/admin",label:"Dashboard",collapsed:c}),(p||u||h)&&(0,r.jsx)(d,{href:"/admin/complaints",label:"Complaints",collapsed:c}),(h||p)&&(0,r.jsx)(d,{href:"/admin/do",label:"DO Dashboard",collapsed:c}),(p||u)&&(0,r.jsx)(d,{href:"/admin/company-dashboard",label:"Company Dashboard",collapsed:c}),p&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d,{href:"/admin/users",label:"Manage Users",collapsed:c}),(0,r.jsx)(d,{href:"/admin/master-data",label:"Form Settings",collapsed:c})]})]}),(0,r.jsx)("div",{style:{marginTop:"auto",padding:"1rem",borderTop:"1px solid rgba(255,255,255,0.15)"},children:(0,r.jsx)("button",{onClick:()=>{(0,a.qz)(),window.location.href="/admin/login"},style:{width:"100%",padding:"0.5rem",background:"#3AA469",border:"none",borderRadius:"4px",color:"white",fontSize:"0.8rem",cursor:"pointer"},children:c?"⎋":"Logout"})})]}),(0,r.jsx)("main",{style:{flex:1,padding:"1.5rem"},children:(0,r.jsx)("div",{style:{maxWidth:1300,margin:"0 auto"},children:t})})]})}function d(e){let{href:t,label:n,collapsed:i}=e;return(0,r.jsx)("div",{style:{marginBottom:"0.3rem"},children:(0,r.jsxs)(o(),{href:t,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.45rem 0.6rem",borderRadius:"6px",textDecoration:"none",color:"white",fontSize:"0.85rem",transition:"background 0.2s, transform 0.1s"},children:[(0,r.jsx)("span",{style:{width:"8px",height:"8px",background:"#3AA469",borderRadius:"50%"}}),!i&&(0,r.jsx)("span",{style:{fontSize:"0.85rem"},children:n})]})})}},3139:function(e,t,n){"use strict";n.d(t,{S:function(){return i}});let r="https://complaint.ogra.org.pk";if(!r){let{protocol:e,hostname:t}=window.location;r="".concat(e,"//").concat(t,":5000")}r||(r="http://localhost:5000");let i="https://complaint.ogra.org.pk"},1013:function(e,t,n){"use strict";function r(){return localStorage.getItem("token")||null}function i(e){e&&localStorage.setItem("token",e)}function o(){localStorage.removeItem("token"),localStorage.removeItem("role"),localStorage.removeItem("username")}function a(){let e=r();return e?{Authorization:"Bearer "+e}:{}}function s(e,t){e&&localStorage.setItem("role",e),t&&localStorage.setItem("username",t)}function l(){return localStorage.getItem("role")}function d(){return localStorage.getItem("username")}n.d(t,{$V:function(){return a},IO:function(){return s},LP:function(){return r},Ms:function(){return d},cY:function(){return l},o4:function(){return i},qz:function(){return o}})},1549:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var r=n(5893),i=n(7294),o=n(7066),a=n(9046),s=n(3139),l=n(1013);function d(e){let{title:t,subtitle:n,items:o,onCreate:a,onDelete:s,busy:l}=e,[d,c]=(0,i.useState)(""),m=()=>{let e=d.trim();e&&(a(e),c(""))};return(0,r.jsxs)("div",{className:"card",style:{marginBottom:"0.9rem",background:"white",borderRadius:10,padding:"0.9rem 1rem",boxShadow:"0 1px 3px rgba(15,23,42,0.08)"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",gap:"0.75rem",flexWrap:"wrap",alignItems:"center",marginBottom:"0.7rem"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{style:{fontSize:"0.95rem",color:"#0C512F",margin:0,marginBottom:2},children:t}),n&&(0,r.jsx)("p",{style:{fontSize:"0.75rem",color:"#6B7280",margin:0},children:n})]}),(0,r.jsxs)("div",{style:{fontSize:"0.75rem",padding:"0.15rem 0.55rem",borderRadius:999,background:"#F3F4F6",color:"#374151",border:"1px solid #E5E7EB",whiteSpace:"nowrap"},children:["Total: ",(0,r.jsx)("strong",{children:o.length})]})]}),(0,r.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.4rem",alignItems:"center",marginBottom:"0.6rem"},children:[(0,r.jsx)("input",{className:"input",placeholder:"Enter new name…",value:d,onChange:e=>c(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),m())},style:{flex:"1 1 220px",minWidth:0}}),(0,r.jsx)("button",{className:"btn btn-primary",type:"button",onClick:m,disabled:!d.trim()||l,style:{background:"#0C512F",border:"none",color:"white",padding:"0.4rem 0.9rem",borderRadius:6,fontSize:"0.8rem",whiteSpace:"nowrap"},children:l?"Saving…":"Add"})]}),0===o.length?(0,r.jsx)("div",{style:{fontSize:"0.8rem",color:"#6B7280",padding:"0.4rem 0.2rem"},children:"No items added yet."}):(0,r.jsx)("div",{style:{overflowX:"auto"},children:(0,r.jsxs)("table",{style:{width:"100%",fontSize:"0.8rem",borderCollapse:"collapse"},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{style:{background:"#0C512F",color:"white"},children:[(0,r.jsx)("th",{align:"left",style:{padding:"6px 8px",fontWeight:500},children:"ID"}),(0,r.jsx)("th",{align:"left",style:{padding:"6px 8px",fontWeight:500},children:"Name"}),(0,r.jsx)("th",{align:"left",style:{padding:"6px 8px",fontWeight:500},children:"Actions"})]})}),(0,r.jsx)("tbody",{children:o.map((e,t)=>(0,r.jsxs)("tr",{style:{borderTop:"1px solid #E5E7EB",background:t%2==0?"white":"rgba(249,250,251,0.9)"},children:[(0,r.jsx)("td",{style:{padding:"6px 8px",color:"#4B5563"},children:e.id}),(0,r.jsx)("td",{style:{padding:"6px 8px",color:"#111827"},children:e.name}),(0,r.jsx)("td",{style:{padding:"6px 8px"},children:(0,r.jsx)("button",{className:"btn",type:"button",onClick:()=>s(e.id,e.name),style:{fontSize:"0.75rem",padding:"0.25rem 0.6rem",borderRadius:6,border:"1px solid #FCA5A5",background:"#FEF2F2",color:"#B91C1C"},children:"Delete"})})]},e.id))})]})})]})}function c(){let[e,t]=(0,i.useState)([]),[n,c]=(0,i.useState)([]),[m,p]=(0,i.useState)([]),[u,h]=(0,i.useState)(!1),[g,x]=(0,i.useState)(""),[f,y]=(0,i.useState)(""),[b,j]=(0,i.useState)(""),S=(0,l.cY)(),w=async()=>{h(!0),y(""),j("");try{let[e,n,r]=await Promise.all([o.Z.get(s.S+"/api/master/categories"),o.Z.get(s.S+"/api/master/companies"),o.Z.get(s.S+"/api/master/types")]);t(e.data||[]),c(n.data||[]),p(r.data||[])}catch(e){console.error(e),y("Failed to load form settings. Please ensure backend API is running.")}finally{h(!1)}};(0,i.useEffect)(()=>{w()},[]);let v=async(e,t)=>{if(t.trim()){y(""),j(""),x(e);try{await o.Z.post(s.S+"/api/master/"+e,{name:t.trim()},{headers:(0,l.$V)()}),j("Added successfully."),await w()}catch(e){var n,r;console.error(e),y((null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(n=r.data)||void 0===n?void 0:n.message)||"Could not add. Please try again.")}finally{x("")}}},C=async(e,t,n)=>{if(window.confirm('Are you sure you want to delete "'.concat(n,'" from ').concat(e,"?"))){y(""),j(""),x(e);try{await o.Z.delete(s.S+"/api/master/"+e+"/"+t,{headers:(0,l.$V)()}),j("Deleted successfully."),await w()}catch(e){var r,i;console.error(e),y((null==e?void 0:null===(i=e.response)||void 0===i?void 0:null===(r=i.data)||void 0===r?void 0:r.message)||"Could not delete. It may be in use.")}finally{x("")}}};return"ADMIN"!==S?(0,r.jsx)(a.Z,{children:(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("h1",{style:{fontSize:"1rem",color:"#DC2626"},children:"Access denied"}),(0,r.jsx)("p",{style:{fontSize:"0.85rem",color:"#6B7280",marginTop:"0.25rem"},children:"Only main admin (SR. REGISTRAR) can change form settings."})]})}):(0,r.jsx)(a.Z,{children:(0,r.jsxs)("div",{className:"card",style:{background:"white",borderRadius:10,padding:"1.3rem 1.4rem"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",gap:"0.75rem",flexWrap:"wrap",alignItems:"center",marginBottom:"0.8rem"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{style:{fontSize:"1.2rem",color:"#0C512F",marginBottom:"0.2rem"},children:"Form Settings"}),(0,r.jsx)("p",{style:{fontSize:"0.85rem",color:"#4B5563",margin:0},children:"Manage master data used in the public complaint form."})]}),(0,r.jsx)("div",{style:{fontSize:"0.75rem",padding:"0.25rem 0.7rem",borderRadius:999,background:"#F3F4F6",color:"#374151",border:"1px solid #E5E7EB",display:"flex",alignItems:"center",gap:"0.4rem",whiteSpace:"nowrap"},children:u?(0,r.jsx)("span",{children:"Refreshing…"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{children:["Categories: ",e.length]}),(0,r.jsxs)("span",{children:["• Companies: ",n.length]}),(0,r.jsxs)("span",{children:["• Types: ",m.length]})]})})]}),f&&(0,r.jsx)("div",{style:{background:"#FEE2E2",borderRadius:6,padding:"0.5rem 0.75rem",color:"#B91C1C",fontSize:"0.85rem",marginBottom:"0.7rem",border:"1px solid #FCA5A5"},children:f}),b&&(0,r.jsx)("div",{style:{background:"#DCFCE7",borderRadius:6,padding:"0.5rem 0.75rem",color:"#166534",fontSize:"0.85rem",marginBottom:"0.7rem",border:"1px solid #86EFAC"},children:b}),(0,r.jsx)(d,{title:"Categories",subtitle:"Complaint categories shown on the public form.",items:e,onCreate:e=>v("categories",e),onDelete:(e,t)=>C("categories",e,t),busy:"categories"===g}),(0,r.jsx)(d,{title:"Companies",subtitle:"Gas / oil company names visible to complainant.",items:n,onCreate:e=>v("companies",e),onDelete:(e,t)=>C("companies",e,t),busy:"companies"===g}),(0,r.jsx)(d,{title:"Complaint Types",subtitle:"Types such as ‘Billing Issue’, ‘Safety’, ‘Connection’, etc.",items:m,onCreate:e=>v("types",e),onDelete:(e,t)=>C("types",e,t),busy:"types"===g})]})})}}},function(e){e.O(0,[66,664,888,774,179],function(){return e(e.s=8918)}),_N_E=e.O()}]);