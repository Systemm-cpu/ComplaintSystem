(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[110],{1092:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/company-dashboard",function(){return n(3949)}])},9046:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(5893),a=n(1664),o=n.n(a),i=n(1013),s=n(7294);function l(e){let{children:t}=e,[n,a]=(0,s.useState)(null),[o,l]=(0,s.useState)(null),[c,u]=(0,s.useState)(!1);(0,s.useEffect)(()=>{a((0,i.cY)()),l((0,i.Ms)())},[]);let h="ADMIN"===n,m="SR_REGISTRAR"===n,g="DO"===n;return(0,r.jsxs)("div",{style:{minHeight:"100vh",display:"flex",background:"#f6f6f6",fontFamily:"sans-serif"},children:[(0,r.jsxs)("aside",{className:"print-hidden",onMouseEnter:()=>u(!1),onMouseLeave:()=>u(!0),style:{width:c?"70px":"240px",background:"#0C512F",color:"white",transition:"width 0.25s ease",overflow:"hidden",boxShadow:"2px 0 5px rgba(0,0,0,0.1)"},children:[(0,r.jsxs)("div",{style:{padding:"1rem",borderBottom:"1px solid rgba(255,255,255,0.15)",display:"flex",alignItems:"center",gap:"0.75rem"},children:[(0,r.jsx)("img",{src:"/ogra-logo.png",alt:"OGRA Logo",style:{width:"36px",height:"36px",objectFit:"contain"}}),!c&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{style:{fontWeight:700,fontSize:"0.95rem",lineHeight:"1.2"},children:"OGRA Dashboard"}),(0,r.jsx)("div",{style:{fontSize:"0.7rem",opacity:.8},children:"ADMIN"===n?"REGISTRAR":"".concat(o||"DO User"," (").concat(n||"No Role",")")})]})]}),(0,r.jsxs)("nav",{style:{padding:"0.75rem 0.5rem"},children:[(0,r.jsx)(d,{href:"/admin",label:"Dashboard",collapsed:c}),(h||m||g)&&(0,r.jsx)(d,{href:"/admin/complaints",label:"Complaints",collapsed:c}),(g||h)&&(0,r.jsx)(d,{href:"/admin/do",label:"DO Dashboard",collapsed:c}),(h||m)&&(0,r.jsx)(d,{href:"/admin/company-dashboard",label:"Company Dashboard",collapsed:c}),h&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d,{href:"/admin/users",label:"Manage Users",collapsed:c}),(0,r.jsx)(d,{href:"/admin/master-data",label:"Form Settings",collapsed:c})]})]}),(0,r.jsx)("div",{style:{marginTop:"auto",padding:"1rem",borderTop:"1px solid rgba(255,255,255,0.15)"},children:(0,r.jsx)("button",{onClick:()=>{(0,i.qz)(),window.location.href="/admin/login"},style:{width:"100%",padding:"0.5rem",background:"#3AA469",border:"none",borderRadius:"4px",color:"white",fontSize:"0.8rem",cursor:"pointer"},children:c?"âŽ‹":"Logout"})})]}),(0,r.jsx)("main",{style:{flex:1,padding:"1.5rem"},children:(0,r.jsx)("div",{style:{maxWidth:1300,margin:"0 auto"},children:t})})]})}function d(e){let{href:t,label:n,collapsed:a}=e;return(0,r.jsx)("div",{style:{marginBottom:"0.3rem"},children:(0,r.jsxs)(o(),{href:t,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.45rem 0.6rem",borderRadius:"6px",textDecoration:"none",color:"white",fontSize:"0.85rem",transition:"background 0.2s, transform 0.1s"},children:[(0,r.jsx)("span",{style:{width:"8px",height:"8px",background:"#3AA469",borderRadius:"50%"}}),!a&&(0,r.jsx)("span",{style:{fontSize:"0.85rem"},children:n})]})})}},9875:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(5893);function a(e){let{tone:t="gray",children:n}=e,a={};switch(t){case"green":a={background:"#0C512F"};break;case"yellow":a={background:"#D97706"};break;case"blue":a={background:"#2563EB"};break;case"red":a={background:"#DC2626"};break;default:a={background:"#6B7280"}}return(0,r.jsx)("span",{style:{display:"inline-block",padding:"3px 8px",borderRadius:"6px",fontSize:"0.75rem",fontWeight:600,color:"white",textTransform:"capitalize",...a},children:n})}},3139:function(e,t,n){"use strict";n.d(t,{S:function(){return a}});let r="https://complaint.ogra.org.pk";if(!r){let{protocol:e,hostname:t}=window.location;r="".concat(e,"//").concat(t,":5000")}r||(r="http://localhost:5000");let a="https://complaint.ogra.org.pk"},1013:function(e,t,n){"use strict";function r(){return localStorage.getItem("token")||null}function a(e){e&&localStorage.setItem("token",e)}function o(){localStorage.removeItem("token"),localStorage.removeItem("role"),localStorage.removeItem("username")}function i(){let e=r();return e?{Authorization:"Bearer "+e}:{}}function s(e,t){e&&localStorage.setItem("role",e),t&&localStorage.setItem("username",t)}function l(){return localStorage.getItem("role")}function d(){return localStorage.getItem("username")}n.d(t,{$V:function(){return i},IO:function(){return s},LP:function(){return r},Ms:function(){return d},cY:function(){return l},o4:function(){return a},qz:function(){return o}})},3949:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var r=n(5893),a=n(7294),o=n(7066),i=n(9046),s=n(3139),l=n(1013),d=n(1664),c=n.n(d),u=n(9875);function h(){let[e,t]=(0,a.useState)([]),[n,d]=(0,a.useState)(""),[h,m]=(0,a.useState)({items:[],total:0,pages:1,page:1});(0,a.useEffect)(()=>{o.Z.get(s.S+"/api/master/companies").then(e=>t(e.data))},[]);let g=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0,n=new URLSearchParams;n.set("page",String(e)),t&&n.set("companyId",String(t)),m((await o.Z.get(s.S+"/api/complaints?"+n.toString(),{headers:(0,l.$V)()})).data)};(0,a.useEffect)(()=>{n&&g(1,Number(n))},[n]);let f=e=>"Closed"===e?"green":"In Progress"===e?"yellow":"gray";return(0,r.jsx)(i.Z,{children:(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("h1",{className:"text-ogra-green",style:{fontSize:"1.1rem",marginBottom:"0.4rem"},children:"Company Dashboard"}),(0,r.jsxs)("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:[(0,r.jsxs)("select",{className:"input",style:{maxWidth:260},value:n,onChange:e=>d(e.target.value),children:[(0,r.jsx)("option",{value:"",children:"Select Company"}),e.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]}),n&&(0,r.jsx)("button",{className:"btn",onClick:()=>g(1,Number(n)),children:"Refresh"})]}),n?(0,r.jsx)("div",{style:{overflowX:"auto"},children:(0,r.jsxs)("table",{style:{width:"100%",fontSize:"0.8rem",borderCollapse:"collapse"},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{align:"left",children:"Tracking"}),(0,r.jsx)("th",{align:"left",children:"Name"}),(0,r.jsx)("th",{align:"left",children:"Status"}),(0,r.jsx)("th",{align:"left",children:"Created"})]})}),(0,r.jsx)("tbody",{children:h.items.map(e=>{var t,n;return(0,r.jsxs)("tr",{style:{borderTop:"1px solid rgba(31,41,55,0.8)"},children:[(0,r.jsx)("td",{children:(0,r.jsx)(c(),{href:"/admin/view/".concat(e.id),children:e.trackingId})}),(0,r.jsxs)("td",{children:[e.firstName," ",e.lastName||""]}),(0,r.jsx)("td",{children:(0,r.jsx)(u.Z,{tone:f(null===(t=e.status)||void 0===t?void 0:t.name),children:(null===(n=e.status)||void 0===n?void 0:n.name)||e.statusId})}),(0,r.jsx)("td",{children:new Date(e.createdAt).toLocaleString()})]},e.id)})})]})}):(0,r.jsx)("p",{style:{fontSize:"0.85rem",color:"#9ca3af"},children:"Select a company to see its complaints."})]})})}}},function(e){e.O(0,[66,664,888,774,179],function(){return e(e.s=1092)}),_N_E=e.O()}]);