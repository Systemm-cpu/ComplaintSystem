(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[300],{6863:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/login",function(){return n(8548)}])},3139:function(e,t,n){"use strict";n.d(t,{S:function(){return a}});let r="https://complaint.ogra.org.pk";if(!r){let{protocol:e,hostname:t}=window.location;r="".concat(e,"//").concat(t,":5000")}r||(r="http://localhost:5000");let a="https://complaint.ogra.org.pk"},1013:function(e,t,n){"use strict";function r(){return localStorage.getItem("token")||null}function a(e){e&&localStorage.setItem("token",e)}function o(){localStorage.removeItem("token"),localStorage.removeItem("role"),localStorage.removeItem("username")}function i(){let e=r();return e?{Authorization:"Bearer "+e}:{}}function l(e,t){e&&localStorage.setItem("role",e),t&&localStorage.setItem("username",t)}function s(){return localStorage.getItem("role")}function u(){return localStorage.getItem("username")}n.d(t,{$V:function(){return i},IO:function(){return l},LP:function(){return r},Ms:function(){return u},cY:function(){return s},o4:function(){return a},qz:function(){return o}})},8548:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=n(5893),a=n(7294),o=n(7066),i=n(3139),l=n(1013),s=n(1163);function u(){let[e,t]=(0,a.useState)({username:"",password:""}),[n,u]=(0,a.useState)(""),c=(0,s.useRouter)(),d=async t=>{var n,r,a,s;t.preventDefault(),u("");try{let t=await o.Z.post(i.S+"/api/auth/login",e);(0,l.o4)(t.data.token),(0,l.IO)(t.data.user.role,t.data.user.username),(null===(r=t.data)||void 0===r?void 0:null===(n=r.user)||void 0===n?void 0:n.role)==="DO"?c.push("/admin/do"):c.push("/admin")}catch(e){u((null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)||"Login failed")}};return(0,r.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"radial-gradient(circle at top, #0f172a, #020617)"},children:(0,r.jsxs)("div",{className:"card",style:{width:"100%",maxWidth:360},children:[(0,r.jsx)("h1",{className:"text-ogra-green",style:{fontSize:"1.3rem",marginBottom:"0.4rem"},children:"Admin / DO Login"}),(0,r.jsxs)("form",{onSubmit:d,style:{display:"grid",gap:"0.5rem"},children:[n&&(0,r.jsx)("div",{style:{color:"#fecaca",fontSize:"0.8rem"},children:n}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"label",children:"Username"}),(0,r.jsx)("input",{className:"input",value:e.username,onChange:n=>t({...e,username:n.target.value})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"label",children:"Password"}),(0,r.jsx)("input",{type:"password",className:"input",value:e.password,onChange:n=>t({...e,password:n.target.value})})]}),(0,r.jsx)("button",{className:"btn btn-primary",style:{marginTop:"0.25rem"},children:"Login"})]})]})})}},1163:function(e,t,n){e.exports=n(9090)}},function(e){e.O(0,[66,888,774,179],function(){return e(e.s=6863)}),_N_E=e.O()}]);